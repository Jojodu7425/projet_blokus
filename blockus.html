<!doctype html>
<html>
    

       <!--  ////////////// HEAD ///////////////////// -->
    <head>
           
    <meta charset="UTF-8">
    <title>Blockus </title>
    <link href="custom.css">    
        
    <script>
        ////////////////////////////////////// DEBUT DES VAR //////////////////////////////////////////////
       /////////////////////////////////////// LES VAR GLOBALES ///////////////////////////////////////////

        ///////////////LES VAR TEST/////
        var  testB = 0;
        ////////////////////////////////
        
    
        var context = null;

       
        // clic sur la zone de jeu (coordonnées relatives au canvas)
        var clic = { x: 0, y: 0 };

        //var faux = { hauteur: 32, largeur: 32, couleur: "" };

        // var vrai = { hauteur: 32, largeur: 32, couleur: "RED" };
        var couleurB = "blue";
        var couleurR = "red";
        var couleurY = "yellow";
        var couleurG = "green";
        var posCarreX = 10;
        var posCarreY = 10;

        var posCarreX = 5;
        var posCarreY = 5;

        var posX = posCarreX * 32;
        var posY = posCarreY * 32;

        var poser = true;
        var nomPiece;


       
        
    
        
        
        /////////////////////////////////////// LES VAR GLOBALES ///////////////////////////////////////////
        //////////////////////////////////////////LES CLASSES//////////////////////////////////////////////
        
        
        
        class Joueur {
            constructor(couleur){ 
                let piece1 = new Piece1(couleur);
                let piece2 = new Piece2(couleur);
                let piece3 = new Piece3(couleur);   
                let piece4 = new Piece4(couleur);   
                let piece5 = new Piece5(couleur);          
                let piece6 = new Piece6(couleur);   
                let piece7 = new Piece7(couleur);   
                let piece8 = new Piece8(couleur);    
                let piece9 = new Piece9(couleur); 
                let piece10 = new Piece10(couleur);     
                let piece11 = new Piece11(couleur);      
                let piece12 = new Piece12(couleur);     
                let piece13 = new Piece13(couleur);   
                let piece14 = new Piece14(couleur);    
                let piece15 = new Piece15(couleur);     
                let piece16 = new Piece16(couleur);   
                let piece17 = new Piece17(couleur);   
                let piece18 = new Piece18(couleur);    
                let piece19 = new Piece19(couleur);    
                let piece20 = new Piece20(couleur);   
                let piece21 = new Piece21(couleur);
                
            }
    
        }
        class Piece1{
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false];
            }
            coordInitial(){
                this.x = 650;
                this.y = 132;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
        }
        class Piece2{
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false];
            }
            coordInitial(){
                this.x = 725;
                this.y = 132;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece3{
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false];
            }
            coordInitial(){
                this.x = 832;
                this.y = 132;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece4{
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, true, false, false, false];
            }
            coordInitial(){
                this.x = 910;
                this.y = 132;
            
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece5{
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false];
            }
            coordInitial(){
                this.x = 1050;
                this.y = 132;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece6{
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, true, false, false, false],
                [false, true, false, false, false],
                [true, true, false, false, false];
            }
            coordInitial(){
                this.x = 714;
                this.y = 175;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece7{
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, true, false, false, false],
                [false, true, true, false, false],
                [false, true, false, false, false];
            }
            coordInitial(){
                this.x = 825;
                this.y = 143;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece8{
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, true, false, false, false],
                [true, true, false, false, false];
            }
            coordInitial(){
                this.x = 985;
                this.y = 175;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece9{
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, true, false, false, false],
                [false, true, true, false, false];
            }
            coordInitial(){
                this.x = 900;
                this.y = 180;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece10{      
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false];
            }
            coordInitial(){
                this.x = 777;
                this.y = 250;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece11{      
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, true, false, false, false],
                [false, true, false, false, false],
                [false, true, false, false, false],
                [true, true, false, false, false];
            }
            coordInitial(){
                this.x = 1050;
                this.y = 218;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
            
        }
        class Piece12{
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, true, false, false, false],
                [false, true, false, false, false],
                [true, true, false, false, false],
                [true, false, false, false, false];
            }
            coordInitial(){
                this.x = 855;
                this.y = 260;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece13{      
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, true, false, false, false],
                [true, true, false, false, false],
                [true, true, false, false, false];
            }
            coordInitial(){
                this.x = 715;
                this.y = 450;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece14{      
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, true, false, false, false],
                [false, true, false, false, false],
                [true, true, false, false, false];
            }
            coordInitial(){
                this.x = 823;
                this.y = 337;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece15{     
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, true, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false];
            }
            coordInitial(){
                this.x = 996;
                this.y = 292;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece16{      
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, true, false, false, false],
                [false, true, false, false, false],
                [true, true, true, false, false];
            }
            coordInitial(){
                this.x = 1050;
                this.y = 300;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
            
        }
        class Piece17{      
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, true, true, false, false];
            }
            coordInitial(){
                this.x = 715;
                this.y = 292;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece18{      
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [true, true, false, false, false],
                [false, true, true, false, false],
                [false, false, true, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false];
            }
            coordInitial(){
                this.x = 990;
                this.y = 307;
                
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece19{      
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, true, true, false, false],
                [false, false, true, false, false];
            }
            coordInitial(){
                this.x = 1050;
                this.y = 415;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece20{     
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, true, true, false, false],
                [false, true, false, false, false];
            }
            coordInitial(){
                this.x = 820;
                this.y = 415;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        class Piece21{      
            couleur;
            tab;
            x;
            y;
            hauteur;
            largeur;
            lock;
            constructor(couleur){
                this.couleur = couleur;
            }
            tab(){
               this.tab =
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, true, false, false, false],
                [true, true, true, false, false],
                [false, true, false, false, false],
            }
            coordInitial(){
                this.x = 940;
                this.y = 415;
            }
            unlocked(){
                this.lock = false;
            }
            dim(){
                this.hauteur = 32;
                this.largeur = 32;
            }
            
        }
        
        
        //////////////////////////////////////////LES CLASSES/////////////////////////////////////////////
        
        // le tour de chaque joueur, initialisé à faux (à pars bleu) pour chaque joueur au debut du jeu
        var turn = {
            turnBleu: true,
            turnRed: false,
            turnGreen: false,
            turnYellow: false,
            
        }; 

        /*var m = 100;
        var h = 100;

        var piece1 = {
            x: 550 + m,
            y: 32 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
            ]

        }
        var piece2 = {
            x: 625 + m,
            y: 32 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
            ]

        }
        var piece3 = {
            x: 732 + m,
            y: 32 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
            ]

        }
        var piece4 = {
            x: 810 + m,
            y: 32 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, true, false, false, false],
            ]

        }
        var piece5 = {
            x: 950 + m,
            y: 32 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
            ]

        }
        var piece6 = {
            x: 614 + m,
            y: 75 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, true, false, false, false],
                [false, true, false, false, false],
                [true, true, false, false, false],
            ]

        }
        var piece7 = {
            x: 725 + m,
            y: 43 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, true, false, false, false],
                [false, true, true, false, false],
                [false, true, false, false, false],
            ]

        }
        var piece8 = {
            x: 885 + m,
            y: 75 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, true, false, false, false],
                [true, true, false, false, false],
            ]

        }
        var piece9 = {
            x: 800 + m,
            y: 80 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, true, false, false, false],
                [false, true, true, false, false],
            ]

        }
        var piece10 = {
            x: 677 + m,
            y: 150 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
            ]

        }
        var piece11 = {
            x: 950 + m,
            y: 118 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, true, false, false, false],
                [false, true, false, false, false],
                [false, true, false, false, false],
                [true, true, false, false, false],
            ]

        }
        var piece12 = {
            x: 755 + m,
            y: 160 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, true, false, false, false],
                [false, true, false, false, false],
                [true, true, false, false, false],
                [true, false, false, false, false],
            ]

        }
        var piece13 = {
            x: 615 + m,
            y: 350 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, true, false, false, false],
                [true, true, false, false, false],
                [true, true, false, false, false],
            ]

        }
        var piece14 = {
            x: 723 + m,
            y: 237 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, true, false, false, false],
                [false, true, false, false, false],
                [true, true, false, false, false],
            ]

        }
        var piece15 = {
            x: 896 + m,
            y: 192 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, true, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
            ]

        }
        var piece16 = {
            x: 950 + m,
            y: 200 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, true, false, false, false],
                [false, true, false, false, false],
                [true, true, true, false, false],
            ]

        }
        var piece17 = {
            x: 615 + m,
            y: 192 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, false, false, false, false],
                [true, true, true, false, false],
            ]

        }
        var piece18 = {
            x: 890 + m,
            y: 207 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            id: "piece18",
            lock: false,
            tab: [
                [true, true, false, false, false],
                [false, true, true, false, false],
                [false, false, true, false, false],
                [false, false, false, false, false],
                [false, false, false, false, false],
            ]


        }
        var piece19 = {
            x: 950 + m,
            y: 315 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, true, true, false, false],
                [false, false, true, false, false],
            ]

        }
        var piece20 = {
            x: 720 + m,
            y: 315 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [true, false, false, false, false],
                [true, true, true, false, false],
                [false, true, false, false, false],
            ]

        }
        var piece21 = {
            x: 840 + m,
            y: 315 + h,
            couleur: couleur,
            hauteur: 32,
            largeur: 32,
            lock: false,
            tab: [
                [false, false, false, false, false],
                [false, false, false, false, false],
                [false, true, false, false, false],
                [true, true, true, false, false],
                [false, true, false, false, false],
            ]

        }*/

        var ttpieces = {
            "piece1": piece1, "piece2": piece2, "piece3": piece3, "piece4": piece4, "piece5": piece5, "piece6": piece6, "piece7": piece7, "piece8": piece8, "piece9": piece9, "piece10": piece10,
            "piece11": piece11, "piece12": piece12, "piece13": piece13, "piece14": piece14, "piece15": piece15, "piece16": piece16, "piece17": piece17, "piece18": piece18, "piece19": piece19, "piece20": piece20, "piece21": piece21
        };


    















        //////////////////////FIN DES VAR //////////////////////////////////////

        ////////////////////// LES FONCTIONS ///////////////////////////////////


        /////////////LES FONCTIONS POUR FAIRE FONCTIONNER LE JEU ///////////////

        // initialisation (appelée au chargement du corps du document <body onload="init">)
        init = function () {
            // instanciation de la variable globale contenant le contexte
            context = document.getElementById("cvs").getContext("2d");
            context.width = document.getElementById("cvs").width;
            context.height = document.getElementById("cvs").height;

            // on associe au document des écouteurs d'événements
            // --> voir http://www.w3schools.com/js/js_events.asp

            // 2 écouteurs pour le clavier (appui/relâchement d'une touche)
            document.addEventListener("keydown", captureAppuiToucheClavier)
            document.addEventListener("keyup", captureRelacheToucheClavier)
            // on associe au document un écouteur d'événements souris
            document.addEventListener("click", captureClicSouris)

            // --> ces événements vont appeler les fonctions captureXYZ définies après.

            // lancement de la boucle de jeu
            boucleDeJeu();
        }
        boucleDeJeu = function () {
            // mise à jour de l'état du jeu
            update(Date.now());
            // affichage de l'état du jeu
            render();
            // rappel de la boucle de jeu
            // requestAnimationFrame est une fonction JS servant à pré-calculer le prochain affichage
            //  http://www.html5canvastutorials.com/advanced/html5-canvas-animation-stage/
            requestAnimationFrame(boucleDeJeu);
        }
        /**
        *  Mise à jour de l'état du jeu
        *  @param  d   date courante
        */
        var lastUpdate = Date.now();
        update = function (d) {
            //movePiece(event,piece18);


                
            //dernière maj
            lastUpdate = d;
        }
        /**
         *  Fonction réalisant le rendu de l'état du jeu
         */
        render = function () {
            // effacement de l'écran
            context.clearRect(0, 0, context.width, context.height);
            // affichage du titre
            displayTitleGame();
            // Affichage du quadrillage
            for (i = 0; i < 672; i = i + 32) {
                context.beginPath();
                context.moveTo(i, 0);
                context.lineTo(i, context.height);
                context.strokeStyle = "black";
                context.lineWidth = 1;
                context.stroke();
            }
            for (j = 0; j - 1 < 640; j = j + 32) {
                context.beginPath();
                context.moveTo(0, j);
                context.lineTo(640, j);
                context.strokeStyle = "black";
                context.lineWidth = 1;
                context.stroke();
            }

            //affichage pièce 18
            /*for (k=0; k<piece18.tab.length; k++) {
                for (l=0; l<piece18.tab[0].length; l++){
                    if  (piece18.tab[k][l] == true){
                        context.fillStyle = piece18.couleur;
                        context.fillRect(piece18.x + l * 32, piece18.y+k*32,piece18.largeur,piece18.hauteur);


                    }
                }
            }*/
            //affichage de toutes les pieces
            for (z = 1; z <= 21; z++) {
                for (k = 0; k < ttpieces["piece" + z].tab.length; k++) {
                    for (l = 0; l < ttpieces["piece" + z].tab[0].length; l++) {
                        if (ttpieces["piece" + z].tab[k][l] == true) {
                            context.fillStyle = ttpieces["piece" + z].couleur;
                            context.fillRect(ttpieces["piece" + z].x + k * 32, ttpieces["piece" + z].y + l * 32, ttpieces["piece" + z].largeur, ttpieces["piece" + z].hauteur);

                        }



                    }
                }
            }
          
            //creation des pieces des 4 joueurs
            let JoueurRouge = new Joueur(couleurR);
            let JoueurBleu = new Joueur(couleurB);
            let joueurVert = new Joueur(couleurV);
            let joueurJaune = new Joueur(couleurJ);
            
            displayWhichPlayer(); // peut être dans l'update ?
          
        }

        /////////////FIN DES FONCTIONS POUR FAIRE FONCTIONNER LE JEU ///////////////
        ///////////////////// LES FONCTIONS HASARD //////////////////


        harsardIntervalle = function (min, max) {
            var tire;
            tire = Math.round(min + (Math.random() * ((max - min) + 1)));
            return tire;
        }

        //////////////////////// FIN FONCTON HASARD /////////////////////
        //////////////////////// FONCTION CLAVIER ////////////////////////

        /**
         *  Fonction appelée lorsqu'une touche du clavier est appuyée
         *  Associée à l'événement "keyDown"
         */
        captureAppuiToucheClavier = function (event) {
            // pratique pour connaître les keyCode des touches du clavier :
            //KeyCode: 39 -> right arrow
            //KeyCode: 37  -> left arrow
            //KeyCode : 38 -> up arrow
            //KeyCode : 40 -> down arrow


        }
        /**
         *  Fonction appelée lorsqu'une touche du clavier est relâchée
         *  Associée à l'événement "keyUp"
         */
        //  --> http://www.cambiaresearch.com/articles/15/javascript-key-codes
        captureRelacheToucheClavier = function (event) {


        }



        ////////////////////////FIN FONCTION CLAVIER ////////////////////
        ////////////////////// FONCTION SOURIS /////////////////////////
        /**
        *  Fonction appelée lorsqu'une touche du clavier est relâchée
        *  Associée à l'événement "click"
        */
        captureClicSouris = function (event) {
            if (event.target.id == "cvs") {
                clic.x = event.pageX - event.target.offsetLeft;
                clic.y = event.pageY - event.target.offsetTop;

            }

            //selectionnerPiece();

            if (poser) {
                poser = false;
            }      
        }
        movePiece = function (e) {
            var piece = selectionnerPiece();
            if (poser == false && !piece.lock) {
                if (event.target.id == "cvs") {
                    piece.x = e.pageX - e.target.offsetLeft;
                    piece.y = e.pageY - e.target.offsetTop;
                }
            }
            
        }
        function doubleClick() {
            var piece = selectionnerPiece();
               poser = true;
               piece.lock = true;
        }

       

       
     
        



        //////////////////////FIN FONCTION SOURIS //////////////////////
        //////////////////////FCT AFFICHAGE ///////////////////////////
        displayWhichPlayer = function(){
            if (turn.turnBleu) {
                turn.turnRed, turn.turnYellow, turn.turnGreen = false;
                couleur = "blue";
              for (i = 1; i < 32; i = i + 1) {
                    context.beginPath();
                    context.moveTo(640, i);
                    context.lineTo(context.width, i);
                    context.strokeStyle = "blue";
                    context.lineWidth = 1;
                    context.stroke();
                }
            } else if (turn.turnRed) {
                turn.turnBleu, turn.turnYellow, turn.turnGreen = false;
                couleur = "red";
                 for (i = 1; i < 32; i = i + 1) {
                    context.beginPath();
                    context.moveTo(640, i);
                    context.lineTo(context.width, i);
                    context.strokeStyle = "red";
                    context.lineWidth = 1;
                    context.stroke();
                }


            } else if (turn.turnGreen) {
                turn.turnBleu, turn.turnYellow, turn.turnRed = false;
                couleur = "green";
                 for (i = 1; i < 32; i = i + 1) {
                    context.beginPath();
                    context.moveTo(640, i);
                    context.lineTo(context.width, i);
                    context.strokeStyle = "green";
                    context.lineWidth = 1;
                    context.stroke();
                }
            } else {
                turn.turnBleu, turn.turnGreen, turn.turnRed = false;
                couleur = "yellow";
                 for (i = 1; i < 32; i = i + 1) {
                    context.beginPath();
                    context.moveTo(640, i);
                    context.lineTo(context.width, i);
                    context.strokeStyle = "yellow";
                    context.lineWidth = 1;
                    context.stroke();
                }    
            }
        
        }
        displayTitleGame = function(){
             if (testB==0){
            testB++;
            var img = document.createElement("img");
            img.src = 'blokus2.jpg';
            img.setAttribute("height", "75");
            img.setAttribute("width", "100");
            img.setAttribute("alt", "Blokus");
            
            var d = document.getElementById("imageBlokus");
            d.append(img);
            d.setAttribute("style", "text-align:center");
            }  
            
            
        }

        //////////////////////FIN FONCTION AFFICHAGE///////////////////
       /////////////////////// FONCTION PIECE /////////////////////////
        
        // fonction pour verifier si on clique sur une piece
        // Si oui, on peut bouger la piece
          selectionnerPiece = function () {
             var i = 1;
             var trouver = false;
              
             while (!trouver && i <=21  ) {
                 if (trouverPiece(i) == true){

                     trouver = true;


                 }
                 else {
                     
                     i++;
                 }
             
             
             
            
             }
              
             switch(i){
                 case 1:
                  return "piece1"
                 break;
                 case 2:
                  return "piece2"        
                 break;
                 case 3:
                  return "piece3"        
                 break;
                 case 4:
                  return "piece4"               
                 break;
                 case 5:
                  return "piece5"        
                 break;
                 case 6:
                  return "piece6"        
                 break;
                 case 7:
                  return "piece7"  
                 break;
                 case 8:
                  return "piece8"           
                 break;
                 case 9:
                    return "piece9"          
                 break;
                 case 10:
                   return "piece10"        
                 break;
                 case 11:
                  return "piece11"        
                 break;
                 case 12:
                     return "piece12"        
                 break;
                 case 13:
                      return "piece13"        
                 break;
                 case 14:
                    return "piece14"        
                 break;
                 case 15:
                     return "piece15"        
                 break;
                 case 16:
                     return "piece16"        
                 break;
                 case 17:
                     return "piece17"        
                 break;
                 case 18:
                       return "piece18"        
                 break;
                 case 19:
                      return "piece19"        
                 break;
                 case 20:
                       return "piece20"        
                 break;
                 case 21:
                       return "piece21"        
                 break;

              }



        }
                 
        // Fonction pour bouger les pieces
        // On verifie que poser est faux et que la piece n est pas lock
        movePiece = function(e){
            
            if (poser == false && !piece.lock){
                if (event.target.id == "cvs") {
                    piece.x = e.pageX - e.target.offsetLeft;
                    piece.y = e.pageY - e.target.offsetTop;
                }
            }            
        }
        
        // Affichage des pieces        
        // On verifie si la piece est lock ou pas
        // Si lock est vrai alors la piece ne s'affiche pas a droite de la grille
         affichagePieceD = function () {
          for (z = 1; z <= 21; z++) {
            for (k = 0; k < ttpieces["piece" + z].tab.length; k++) {
              for (l = 0; l < ttpieces["piece" + z].tab[0].length; l++) {
                 if (ttpieces["piece" + z].tab[k][l] == true && ttpieces["piece" + z].lock == false) {
                     context.fillStyle = ttpieces["piece" + z].couleur;
                     context.fillRect(ttpieces["piece" + z].x + k * 32, ttpieces["piece" + z].y + l * 32, ttpieces["piece" + z].largeur, ttpieces["piece" + z].hauteur);
                 }
               }
             }
            }
          }
           
        
        // Trouver piece
        // Utilisation de clic.x et clic.y
        trouverPiece = function (i){
                var ttt = false;
                switch (i){
                case 1:
                 
                 break;
                 case 2:
                 
                 break;
                 case 3:
                      
                 break;
                 case 4:
                              
                 break;
                 case 5:
                   
                 break;
                 case 6:
                 
                 break;
                 case 7:
                
                 break;
                 case 8:
                 
                 break;
                 case 9:
                   
                 break;
                 case 10:
                     
                 break;
                 case 11:
                    
                 break;
                 case 12:
                          
                 break;
                 case 13:
                       
                 break;
                 case 14:
                    
                 break;
                 case 15:
                    
                 break;
                 case 16:
                    
                 break;
                 case 17:
                           
                 break;
                 case 18:
                       if   ( ((clic.x > piece18.x && clic.x < piece18.x + piece18.largeur*2)  && (clic.y > piece18.y && clic.y < piece18.y+piece18.hauteur)) || 
                            ( (clic.x > piece18.x+piece18.largeur && clic.x < piece18.x+piece18.largeur*3)&& (clic.y > piece18.y+piece18.hauteur && clic.y < piece18.y + piece18.hauteur*2))       ||
                            ( (clic.x > piece18.x+piece18.largeur*2 && clic.x < piece18.x+piece18.largeur*3) && (clic.y > piece18.y+ piece18.hauteur*2 && clic.y < piece18.y+ piece18.hauteur*3) ) )  {
                           
                           
                            return ttt = true;    
                       }
                 break;
                 case 19:
                      
                 break;
                 case 20:
                     
                 break;
                 case 21:
                             
                 break;

            
            
                }
            
        }
        
         ///////////////////////FIN FONCTION PIECE /////////////////////////
        ////////////////////// FIN DES FONCTION /////////////////////// 

    </script>
        
        
    </head>
   <!-- /////////////// FIN HEAD ///////////////////// -->
    
   <!-- /////////////// BODY //////////////////// -->
<body onload="init()" style="background-color: black;">

    <div id="imageBlokus"></div>
<canvas id="cvs" width="1400" height="640" style="margin: 10px auto; border: solid 1px #000000; background-color:floralwhite; " onmousemove="movePiece(event)"
        ondblclick="doubleClick()" >
        <!-- un petit carre fait 32 par 32-->
    
</canvas>

    

</body>
    <!-- ///////////////FIN BODY //////////////////// -->
</html>